问题1：

控制台报错：

:5173/#/forecast:1 Uncaught (in promise) TypeError: Failed to fetch dynamically imported module

TypeError: Failed to fetch dynamically imported module

网上的解决方法：[vite生产环境报错，TypeError: Failed to fetch dynamically imported module: xxx - 简书 (jianshu.com)](https://www.jianshu.com/p/a0cd5adf5df9)

我发现在vscode中的报错内容为：

Failed to load url /src/views/plakeco/LoadShedding/basin/sourceDataJson (resolved id: D:/project/wuhusanshan/src/views/plakeco/LoadShedding/basin/sourceDataJson) in D:/project/wuhusanshan/src/views/plakeco/Forecast/LoadShedding/basin/index.vue. Does the file exist?
Failed to load url /src/views/plakeco/LoadShedding/basin/pointsourceDataJson (resolved id: D:/project/wuhusanshan/src/views/plakeco/LoadShedding/basin/pointsourceDataJson) in D:/project/wuhusanshan/src/views/plakeco/Forecast/LoadShedding/basin/index.vue. Does the file exist?

那么需要更改文件路径就可以解决了

疑惑：为什么vue文件路径写错导致两个ts文件访问不到就会在浏览器端出现卡死不断显示加载且控制台报上面的错误？





## 打包 - CDN

[vue3.2+vite+elementPlus，build引入CDN依赖包，提升打包速率，vite-plugin-cdn-import_vite 引入cdn-CSDN博客](https://blog.csdn.net/qq_29132907/article/details/131455244)

对我的这个项目原因是：unpkg网站等国外CDN内容分发网站可能被国家防火墙拦截了

下面是对 unpkg 这个网站的一些看法：[(5 封私信 / 47 条消息) 如何看待 unpkg cdn? - 知乎 (zhihu.com)](https://www.zhihu.com/question/62938096/answer/2987755648)

那么我可不可以有如下解决方案：

1. 在打包时更改 CDN 网址（我不会）
2. 打包时不使用 CDN，直接打包库（我还不会）
3. 打完包后手动修改 CDN 网址。 unpkg.com国内无法访问可代替方案：将项目中`https://unpkg.com`替换为`https://cdn.jsdelivr.net/npm` 或者 unpkg.zhimg.com。第三种方案还可以优化一下，使用多个CDN网址进行尝试，直到某个网址先返回即可。（优化方法我不会）



然后我又想到：有没有可能是 npm pnpm cnpm 的差别呢，有没有可能是 vue build 打包时引入的 cdn。结果未知

我又会了，哈哈哈哈，搜索 cdn 即可



## 图片资源问题

在开发环境下可以显示图片，但在打包后的生产环境下就不可以。

需要 getImgeUrl 工具函数

```TS
export const getImgeUrl = (name: string) => {
    return new URL(`../assets/imgs/${name}`, import.meta.url).href;

    // const path = `../assets/imgs/${name}`;
    // const modules = import.meta.globEager('../assets/imgs/*');
    // console.log(modules[path]);
    // return modules[path]?.default;
};
```

1. `import.meta.url`：`import.meta` 是一个特殊的对象，它提供了关于模块的信息。`import.meta.url` 返回当前模块的 URL 地址。
2. `new URL(..., import.meta.url).href`：这一行创建了一个新的 `URL` 对象，将相对路径 `../assets/imgs/${name}` 转换为绝对路径。`.href` 返回完整的 URL 地址。

整体而言，这个函数的作用是接收一个图像文件的名称，然后返回该图像文件的绝对 URL 地址。在前端开发中，这种方式通常用于动态加载模块或资源文件。



深究原因：